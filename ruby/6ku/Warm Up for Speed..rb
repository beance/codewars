# frozen_string_literal: true

# Warm Up for Speed.
# https://www.codewars.com/kata/5b4dee5d05f04bba43000138/train/ruby

def digit_root(n)
  n.digits.sum
end

def dsddr(n)
  digit_root(n).digits.sum { |d| d**2 }
end

def f(n)
  digit_root(n) + dsddr(n)
end

def sorted_comm_by_digs(arr1, arr2)
  (arr1 & arr2).sort_by { |n| [-f(n), n] }
end

arr1 = [47, 237, 34, 31, 177, 181, 99, 185, 251, 76, 96, 130, 103, 156, 115, 109, 29, 44, 84, 183, 151, 88, 299, 114, 2, 285, 110, 37, 250, 183, 85, 247, 241, 265, 111, 121, 181, 202, 97, 228, 52, 246, 25, 29, 106, 58, 286, 214, 228, 44, 195, 277, 230, 5, 157, 88, 266, 229, 142, 168, 52, 151, 140, 20, 121, 271, 31, 214, 155, 198, 39, 182, 173, 170, 261, 294, 279, 95, 142, 129, 157, 224, 31, 137]
arr2 = [49, 182, 135, 133, 223, 227, 36, 112, 29, 161, 126, 77, 164, 257, 8, 13, 120, 183, 247, 59, 88, 238, 22, 91, 33, 60, 108, 95, 280, 45, 11, 241, 293, 80, 230, 213, 261, 269, 34, 171, 174, 241, 56, 169, 184, 255, 50, 55, 164, 204, 253, 19, 19, 118, 66, 165, 279, 185, 111, 189, 61, 122, 38, 227, 192, 239, 41, 196, 201, 115, 251, 2, 298, 270, 150, 76, 113, 287, 89, 98, 109, 144]
p sorted_comm_by_digs(arr1, arr2)

# [261, 279, 251, 34, 115, 241, 88, 95, 185, 230, 76, 247, 183, 29, 182, 111, 109, 2]
# [279, 261, 251, 88, 34, 115, 241, 95, 185, 230, 76, 247, 183, 29, 182, 111, 109, 2]
